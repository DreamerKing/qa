webpackJsonp([30],{1685:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=e.changePage=function(t,e,n){var o=t.props.location.pathname,r=o&&o.replace(/(.*)\/(.*)/,"$1"),i=t.state.pagination;i.pageSize=n,t.setState({pagination:i}),t.props.history.push(r.concat("/",e))};!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(o,"changePage","D:/Work/yjyx_web/src/components/student/wrong/wrongCom.js")}()},1982:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1386),u=o(a),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();n(1387);var f=n(5),p=o(f),d=n(23),h=n(86),g=o(h);n(1983);var y=n(1685),b=n(1684),v=(o(b),n(729)),m=o(v),w=n(1505),k=o(w),O=n(1654),j=o(O),E=(n(1465),function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={wrongQuestionIdList:[],questionList:[],currentList:[],visible:!1,pagination:{current:1,pageSize:5,defaultPageSize:5,total:0}},n}return s(e,t),l(e,[{key:"componentDidMount",value:function(){var t=this.props.params;this.getQuestionsInfo(t)}},{key:"getQuestionsInfo",value:function(t){var e=this.state.pagination,n=parseInt(t.page);this.fetchWrongQuestionList(n,e.pageSize,t),e.current=parseInt(n),this.setState({pagination:e})}},{key:"componentWillReceiveProps",value:function(t){if(JSON.stringify(this.props)!==JSON.stringify(t)){var e=t.params;this.getQuestionsInfo(e)}}},{key:"fetchWrongQuestionList",value:function(t,e,n){var o=t.subjectId||n.subjectId;n=t.params||n;var r={action:"stats_get_student_failed_question_list",subjectid:o};t=t.current||t,e=t.pageSize||e;var i=t._this||this;i.getWrongQuestionList(r).then(function(n){var r=n&&""!=n&&_.reverse(JSON.parse(n)),s=i.state.pagination||{};s.total=r&&r.length||0,s.current=t;var a=r&&r.slice(e*(t-1),e*t),u=a&&a.map(function(t){return{t:t.t,i:t.i}}),c={action:"getonesubjectfailedquestion",subjectid:o,targetlist:JSON.stringify(u)};i.getQuestions(c).then(function(t){var e=t&&t.map(function(t,e){return(0,j.default)(t,a[e])}),n=r&&r.length>0;i.setState({wrongQuestionIdList:r,questionList:e,currentList:a,pagination:s,visible:n})})}).catch(function(t){console.log(t)})}},{key:"correctQuestion",value:function(t,e){var n=this,o=this.props.params,r={action:"set_student_failed_questions_corrected",subjectid:o.subjectId,gradeid:m.default.session("gradeid"),targetlist:JSON.stringify([{t:t,i:e}])};return new Promise(function(t,e){d.Networker.snatch(g.default.correctQuestion,"POST",r).then(function(r){0==r.retcode?(n.fetchWrongQuestionList(n.state.pagination.current,n.state.pagination.pageSize,o),n.props.reflashRevisedQuestion(!0),t(!0)):e(!1)}).catch(function(t){console.log(t),e(!1)})})}},{key:"getWrongQuestionList",value:function(t){return new Promise(function(e,n){d.Networker.snatch(g.default.stats,"GET",t).then(function(t){0==t.retcode?e(t.failedquestionlist):n(t)}).catch(function(t){n(t)})})}},{key:"changePage",value:function(t,e){(0,y.changePage)(this,t,e)}},{key:"getQuestions",value:function(t){return new Promise(function(e,n){d.Networker.snatch(g.default.stats,"GET",t).then(function(t){0==t.retcode&&e(t.data)}).catch(function(t){n(t),console.log(t.stack)})})}},{key:"showQuestion",value:function(t,e){return this.props.params,t&&p.default.createElement(k.default,c({data:t,status:e,couldView:this.state.couldView,couldTry:this.state.couldTry,taskInfo:this.state.taskInfo,uncorrect:!0,correctQuestion:this.correctQuestion.bind(this)},this.props))}},{key:"render",value:function(){var t=this,e=this.showQuestion(this.state.questionList,3);return p.default.createElement("div",{className:"uncorrect-display"},e,this.state.visible?p.default.createElement(u.default,c({className:"wrong-pagination"},this.state.pagination,{onChange:function(e,n){return t.changePage.call(t,e,n)}})):null)}}]),e}(f.Component)),x=E;e.default=x,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(E,"LookUncorrectQuestion","D:/Work/yjyx_web/src/components/student/wrong/lookUncorrectQuestion.js"),__REACT_HOT_LOADER__.register(x,"default","D:/Work/yjyx_web/src/components/student/wrong/lookUncorrectQuestion.js"))}()},1983:function(t,e,n){var o=n(1984);"string"==typeof o&&(o=[[t.i,o,""]]);var r={};r.transform=void 0,n(117)(o,r),o.locals&&(t.exports=o.locals)},1984:function(t,e,n){e=t.exports=n(116)(void 0),e.push([t.i,".uncorrect-display{margin:8px}.uncorrect-display .questions-group,.uncorrect-display .single-group{padding:8px;border:1px solid #00a8c6;margin:8px 0;border-radius:8px}.uncorrect-display .wrong-pagination{margin:8px auto;text-align:center}",""])},1985:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1386),u=o(a),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();n(1387);var f=n(5),p=o(f),d=n(23),h=n(86),g=o(h);n(1986);var y=n(1685),b=n(1505),v=o(b),m=n(1654),w=o(m),k=n(1896),O=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={wrongQuestionIdList:[],questionList:[],currentList:[],visible:!1,couldTry:null,couldView:0,pagination:{current:1,pageSize:5,defaultPageSize:5,total:0}},n}return s(e,t),l(e,[{key:"componentDidMount",value:function(){var t=this.props.params.page,e=this.state.pagination;t=parseInt(t),this.fetchReviseQuestion(t,e.pageSize),this.getCouldTry(),e.current=parseInt(t),this.setState({pagination:e})}},{key:"componentWillReceiveProps",value:function(t){if(JSON.stringify(this.props)!==JSON.stringify(t)){var e=t.params,n=e.page,o=this.state.pagination.pageSize;this.fetchReviseQuestion(parseInt(n),o)}}},{key:"getCouldTry",value:function(){var t=this,e=this.props.params,n={action:"subjectstatus",subjectid:e.subjectId};d.Networker.snatch(g.default.couldTry,"GET",n).then(function(e){0==e.retcode&&(e.data&&0==e.data.length?t.setState({couldTry:1}):t.setState({couldTry:0}))}).catch(function(t){console.log(t)})}},{key:"getWrongQuestionList",value:function(t){return d.Networker.snatch(g.default.correctQuestion,"GET",t).then(function(t){if(0===t.retcode)return t.failedquestionlist})}},{key:"fetchReviseQuestion",value:function(t,e){var n=this,o=this.props.params,r={action:"stats_get_student_failed_question_list",correctstatus:1,subjectid:o.subjectId};this.getWrongQuestionList(r).then(function(r){var i=r&&""!=r&&_.reverse(JSON.parse(r)),s=n.state.pagination;s.total=i&&i.length||0,s.current=t;var a=i&&i.slice(e*(t-1),e*t),u=a&&a.map(function(t){return{t:t.t,i:t.i}}),c={action:"getonesubjectfailedquestion",subjectid:o.subjectId,targetlist:JSON.stringify(u)},l=i&&i.length>0;n.getQuestions(c).then(function(t){var e=t&&t.map(function(t,e){return(0,w.default)(t,a[e])});n.setState({wrongQuestionIdList:i,questionList:e,currentList:a,pagination:s,visible:l})})}).catch(function(t){console.log(t)})}},{key:"changePage",value:function(t,e){(0,y.changePage)(this,t,e)}},{key:"getQuestions",value:function(t){return new Promise(function(e,n){d.Networker.snatch(g.default.stats,"GET",t).then(function(t){e(t.data)}).catch(function(t){n(t)})})}},{key:"showConfirm",value:function(){var t=this,e=this.state.couldTry,n=this.props.match.params.subjectId,o=this.state.pagination,r=o.current,i=o.pageSize;(0,k.showConfirm)(e,n,this,function(){t.fetchReviseQuestion(r,i)})}},{key:"showQuestion",value:function(t,e){return this.state.currentList,this.props.params,t&&p.default.createElement(v.default,c({data:t,status:e,couldView:this.state.couldView,couldTry:this.state.couldTry,taskInfo:this.state.taskInfo,isCorrected:!0,showConfirm:this.showConfirm.bind(this)},this.props))}},{key:"shouldCheckReviseRecord",value:function(t){if(!Array.isArray(t.subQuestion))return!1;var e=0,n=t.subQuestion.length;do{var o=t.subQuestion[e].correct;if(3===t.subQuestion[e].type&&Array.isArray(o)&&!o.length||!o)return!0;e++}while(e<n);return!1}},{key:"render",value:function(){var t=this,e=this.showQuestion(this.state.questionList,2);return p.default.createElement("div",{className:"revised-display"},e,this.state.visible?p.default.createElement(u.default,c({className:"wrong-pagination"},this.state.pagination,{onChange:function(e,n){return t.changePage.call(t,e,n)}})):null)}}]),e}(f.Component),j=O;e.default=j,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(O,"LookRevisedQuestion","D:/Work/yjyx_web/src/components/student/wrong/lookRevisedQuestion.js"),__REACT_HOT_LOADER__.register(j,"default","D:/Work/yjyx_web/src/components/student/wrong/lookRevisedQuestion.js"))}()},1986:function(t,e,n){var o=n(1987);"string"==typeof o&&(o=[[t.i,o,""]]);var r={};r.transform=void 0,n(117)(o,r),o.locals&&(t.exports=o.locals)},1987:function(t,e,n){e=t.exports=n(116)(void 0),e.push([t.i,".revised-display{margin:8px}.revised-display .questions-group,.revised-display .single-group{padding:8px;border:1px solid #00a8c6;margin:8px 0;border-radius:8px}.revised-display .wrong-pagination{margin:8px auto;text-align:center}.showConfirm .anticon-question-circle{display:none}.showConfirm .ant-confirm-body .ant-confirm-content{margin:0}.showConfirm .ant-confirm-btns{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;float:none;width:100%}.showConfirm .ant-confirm-btns button{width:180px;height:50px;line-height:50px;border:1px solid #d2d2d2;border-radius:50px;background:#fff;font-size:20px;outline:none;cursor:pointer}.showConfirm .ant-confirm-btns .ant-btn-primary{float:right;border-color:#ffdb44;background-color:#ffdb44}",""])},1988:function(t,e,n){var o=n(1989);"string"==typeof o&&(o=[[t.i,o,""]]);var r={};r.transform=void 0,n(117)(o,r),o.locals&&(t.exports=o.locals)},1989:function(t,e,n){e=t.exports=n(116)(void 0),e.push([t.i,".panel-wrong{background-color:#fff;max-width:1100px;min-height:600px;margin:40px auto;-webkit-box-shadow:0 0 0 16px hsla(0,0%,100%,.2);box-shadow:0 0 0 16px hsla(0,0%,100%,.2);position:relative;border-radius:20px}.panel-wrong .rollback{position:absolute;right:10px;top:3px;z-index:10}",""])},2235:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=n(5),c=o(u),l=n(2236),f=o(l),p=function(t){function e(t){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return s(e,t),a(e,[{key:"render",value:function(){return c.default.createElement(f.default,this.props)}}]),e}(u.Component),d=p;e.default=d,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(p,"LookStudentWrongQuestion","D:/Work/yjyx_web/src/containers/student/wrong/lookStudentWrongQuestion.js"),__REACT_HOT_LOADER__.register(d,"default","D:/Work/yjyx_web/src/containers/student/wrong/lookStudentWrongQuestion.js"))}()},2236:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(208),u=o(a),c=n(1389),l=o(c),f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},p=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();n(302),n(1391);var d=n(5),h=o(d),g=(n(12),n(23),n(1982)),y=o(g),_=n(1985),b=o(_);n(1988);var v=l.default.TabPane,m=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={activeKey:"uncorrct",reflashRevised:!1},n}return s(e,t),p(e,[{key:"rollback",value:function(t){this.props.history.push("/student/wrong")}},{key:"changeQuestionTab",value:function(t){var e=this.props.match.params.subjectId,n="/student/wrong/"+e+"/"+t;this.props.history.push(n.concat("/",1))}},{key:"componentDidMount",value:function(){var t=this.props.match.params.tabs;this.setState({activeKey:t})}},{key:"reflashRevisedQuestion",value:function(t){this.setState({reflashRevised:t})}},{key:"componentDidUpdate",value:function(t,e){if(e.reflashRevised)return this.setState({reflashRevised:!1}),!0}},{key:"render",value:function(){return h.default.createElement("div",{className:"panel-wrong"},h.default.createElement(u.default,{onClick:this.rollback.bind(this,"hei"),className:"rollback",icon:"rollback"},"返回"),h.default.createElement(l.default,{defaultActiveKey:"uncorrct",activeKey:this.state.activeKey,onTabClick:this.changeQuestionTab.bind(this)},h.default.createElement(v,{tab:"待订正",key:"uncorrct"},h.default.createElement(y.default,f({params:this.props.match.params},this.props,{reflashRevisedQuestion:this.reflashRevisedQuestion.bind(this)}))),h.default.createElement(v,{tab:"已订正",key:"revised"},h.default.createElement(b.default,f({params:this.props.match.params},this.props,{reflashRevised:this.state.reflashRevised})))))}}]),e}(d.Component),w=m;e.default=w,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(v,"TabPane","D:/Work/yjyx_web/src/components/student/wrong/lookWrongQuestion.js"),__REACT_HOT_LOADER__.register(m,"LookWrongQuestion","D:/Work/yjyx_web/src/components/student/wrong/lookWrongQuestion.js"),__REACT_HOT_LOADER__.register(w,"default","D:/Work/yjyx_web/src/components/student/wrong/lookWrongQuestion.js"))}()}});