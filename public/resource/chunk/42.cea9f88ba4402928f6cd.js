webpackJsonp([42],{2231:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(151),s=o(l),u=n(208),d=o(u),c=n(1380),f=o(c),p=n(35),v=o(p),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(743),n(302),n(1400),n(36);var y=n(5),_=o(y),k=n(1660),m=n(86),g=o(m),b=n(23);n(2232);var w=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={videoList:[],current:0,played:!1,loading:!0},n}return r(t,e),h(t,[{key:"componentDidMount",value:function(){var e=this.props.location.state;if(!e)return void this.setState({loading:!1});var t=e.subjectId,n=e.id;this.fetchVideoResource(t,n)}},{key:"fetchVideoResource",value:function(e,t){var n=this;b.Networker.snatch(g.default.WeakSpotVideo,"GET",{action:"getpklessons",kpid:t,subjectid:e}).then(function(e){e.retcode?v.default.error(e.msg):n.handleVideoList(e.lessons),n.setState({loading:!1})})}},{key:"handleVideoList",value:function(e){for(var t=[],n=0;n<e.length;n++){var o=JSON.parse(e[n].videoobjlist);o={title:o.title||e[n].name,url:o[0].url,description:e[n].knowledgedesc},t.push(o)}this.setState({videoList:t})}},{key:"updateStats",value:function(){var e=this;this.state.played||b.Networker.snatch(g.default.reportVideo,"POST",{action:"set_student_video_view_num",subject_id:this.props.location.state.subjectId,video_type:"weakknowledge"}).then(function(t){t.retcode||e.setState({played:!0})})}},{key:"videoChange",value:function(e){this.setState({current:+e})}},{key:"selectVideo",value:function(){var e=f.default.Option,t=this.state,n=t.videoList,o=t.current;return _.default.createElement(f.default,{defaultValue:String(o),style:{fontSize:14},onChange:this.videoChange.bind(this)},n.map(function(t,n){return _.default.createElement(e,{value:String(n),key:n},t.title)}))}},{key:"videoPanel",value:function(){var e=this,t=this.state,n=t.current,o=t.videoList,i=o[n];return _.default.createElement("div",{className:"play-video"},_.default.createElement("div",{className:"operate"},this.selectVideo(),_.default.createElement(d.default,{icon:"rollback",style:{float:"right",fontSize:14},onClick:function(){return e.props.history.go(-1)}},"返回")),_.default.createElement(k.DefaultPlayer,{className:"video",src:i.url,autoPlay:!0,onError:function(){return v.default.error("视频加载失败!")},onPlay:this.updateStats.bind(this)},"你的浏览器不支持视频标签!"),i.description?_.default.createElement("div",{style:{marginTop:10,wordBreak:"break-all"}},_.default.createElement("p",null,"文字解析:"),i.description):null)}},{key:"render",value:function(){var e=this.state,t=e.videoList,n=e.loading;return _.default.createElement("div",{className:"weak-point-video"},n?_.default.createElement("div",{className:"no-result"},_.default.createElement(s.default,{type:"loading"})," 正在加载..."):t.length?this.videoPanel():_.default.createElement("div",{className:"no-result"},"暂无视频资源!"))}}]),t}(y.Component),E=w;t.default=E,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(w,"PlayVideo","D:/Work/yjyx_web/src/components/student/weak-point/play-video.js"),__REACT_HOT_LOADER__.register(E,"default","D:/Work/yjyx_web/src/components/student/weak-point/play-video.js"))}()},2232:function(e,t,n){var o=n(2233);"string"==typeof o&&(o=[[e.i,o,""]]);var i={};i.transform=void 0,n(117)(o,i),o.locals&&(e.exports=o.locals)},2233:function(e,t,n){t=e.exports=n(116)(void 0),t.push([e.i,".weak-point-video{width:990px;margin:30px auto;background:#fff;padding:20px;font-size:16px;font-weight:500}.weak-point-video .video{width:100%}.weak-point-video .operate{margin-bottom:10px}.weak-point-video .rh5v-Fullscreen_icon,.weak-point-video .rh5v-PlayPause_icon,.weak-point-video .rh5v-Volume_icon{padding:0}.weak-point-video .no-result{text-align:center}",""])}});