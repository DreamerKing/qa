webpackJsonp([37],{2206:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(2207),n=function(e){return e&&e.__esModule?e:{default:e}}(r),o=n.default;t.default=o,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(o,"default","D:/Work/yjyx_web/src/containers/student/task/overview.js")}()},2207:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=a(208),l=r(i),c=a(35),u=r(c),d=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a(302),a(36);var p=a(5),f=r(p),v=a(23),k=a(1574),m=r(k);a(2208);var h=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={questions:[],total:0,taskInfo:{},products:null},a}return s(t,e),d(t,[{key:"componentWillMount",value:function(){var e=this,t={action:"list",getall:"",lastid:0,firstid:0,direction:"ASC"};v.Networker.snatch("/api/student/yj_products/","GET",t).then(function(t){t.retlist.forEach(function(e){return e.content=JSON.parse(e.content)}),e.setState({products:t.retlist})})}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params;m.default.getQuestionType(t.subjectId).then(function(a){m.default.getQuestion(t.taskId).then(function(t){var r=m.default.generateQuestion(t.questions,t.questionlist,a),n=0;r&&r.forEach(function(e){n+=e.list.length}),e.setState({questions:r,total:n,taskInfo:t.task_detail_info})}).catch(function(e){console.log(e)})})}},{key:"hasSyncVideo",value:function(e){var t={gradeId:e.gradeid,seriesId:e.textbookvolid,versionId:e.textbookverid,subjectId:e.subjectid},a=this.state.products;if(!a)return!1;for(var r=void 0,n=0,o=a.length;n<o;n++){for(var s=a[n],i=s.content.grade_tbver_tbvol,o=i&&i.length||0,l=0;l<o;l++){var c=i[l];if(t.gradeId===c.grade_id&&t.seriesId===c.textbookvol_id&&t.versionId===c.textbookver_id){r=s.id;break}}if(r)break}return!!r}},{key:"handleClickChapter",value:function(e){var t=this;return function(){var a={action:"getonememproductinfo",subjectid:e.subjectid};v.Networker.snatch("/api/student/mobile/m_product/","GET",a).then(function(e){return 0!==e.retcode?u.default.error("获取同步视频失败: "+e.msg):e.id}).then(function(a){t.props.history.push("/student/sync-classroom/"+a+"/"+e.gradeid+"/"+e.textbookverid+"/"+e.textbookvolid+"/"+e.subjectid+"/"+e.textbookunitid)})}}},{key:"gotoDoTask",value:function(){var e=this.props.match.url,t=e&&e.replace("overview","doTask");t&&this.props.history.push(t),console.log("doTask",this.props,t)}},{key:"render",value:function(){var e=this,t=this.state,a=t.questions,r=t.taskInfo,n=t.total;return f.default.createElement("div",{className:"task-overview"},f.default.createElement("div",{className:"task-overview-header"},f.default.createElement("h3",{className:"task-name"},r.resource_name),f.default.createElement("p",{className:"task-question-count"},f.default.createElement("span",null,"共",n,"题:"),a&&a.map(function(e,t){var r=a.length==t+1?"":",";return f.default.createElement("span",{key:e.type},""+e.name+e.list.length+"题"+r)})),f.default.createElement("p",{className:"task-description"},f.default.createElement("span",null,"作业描述："),r.description),f.default.createElement("p",{className:"task-description"},f.default.createElement("span",null,"建议用时："),r.suggestspendtime,"分钟")),f.default.createElement("div",{className:"task-charter"},f.default.createElement("h3",{className:"task-charter-header"},"作业所含章节目录"),f.default.createElement("ul",{className:"charter-list"},r.sgttaglist_data&&r.sgttaglist_data.map(function(t,a){return t.sgttag_string&&t.sgttag_string.map(function(a,r){return f.default.createElement("li",{key:r,style:{display:"block"}},f.default.createElement("p",null,a,e.hasSyncVideo(t)&&f.default.createElement("span",{className:"chapter",onClick:e.handleClickChapter(t),style:{marginLeft:8,color:"#1697e5",cursor:"pointer"}},"同步视频学习>")||null))})}))),f.default.createElement("div",{className:"task-todo"},f.default.createElement(l.default,{type:"ghost",onClick:this.gotoDoTask.bind(this)},"开始做作业")),f.default.createElement("div",{className:"task-tips"},f.default.createElement("h3",{className:"task-tips-header"},"温馨提醒"),f.default.createElement("p",{className:"task-tips"},"完成作业后，提醒家长在家长端及时确认系统才会将作业提交到老师端哦！")))}}]),t}(p.Component),g=h;t.default=g,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(h,"Overview","D:/Work/yjyx_web/src/components/student/task/overview.js"),__REACT_HOT_LOADER__.register(g,"default","D:/Work/yjyx_web/src/components/student/task/overview.js"))}()},2208:function(e,t,a){var r=a(2209);"string"==typeof r&&(r=[[e.i,r,""]]);var n={};n.transform=void 0,a(117)(r,n),r.locals&&(e.exports=r.locals)},2209:function(e,t,a){t=e.exports=a(116)(void 0),t.push([e.i,".task-overview{margin:40px auto;background-color:#fff;width:100%;max-width:1100px;-webkit-box-shadow:0 0 0 16px hsla(0,0%,100%,.2);box-shadow:0 0 0 16px hsla(0,0%,100%,.2);border-radius:20px}.task-overview .task-overview-header{margin:8px auto;padding:8px}.task-overview .task-overview-header .task-name{font-size:1.4em;padding:8px 0;margin:8px;text-align:center}.task-overview .task-overview-header .task-question-count{text-align:center;font-size:.9em;margin:8px 0}.task-overview .task-overview-header .task-description{margin-left:16px;margin-bottom:8px;font-size:1.1em}.task-overview .task-charter{padding:8px;margin:8px}.task-overview .task-charter .task-charter-header{padding:16px 8px;margin:8px;font-size:1.4em;text-align:center;border-bottom:1px solid #eee}.task-overview .task-charter .charter-list{color:#666;margin:8px;list-style:disc;padding:8px 8px 8px 16px}.task-overview .task-charter .charter-list li{font-size:1em;line-height:1.2em;padding:4px 0}.task-overview .task-todo{margin:16px auto;text-align:center;padding:8px}.task-overview .task-tips{background-color:#eee;border-bottom-left-radius:20px;border-bottom-right-radius:20px;padding:16px 8px;margin:0 auto}.task-overview .task-tips .task-tips-header{text-align:center;font-size:1.2em}.task-overview .task-tips .task-tips{text-align:center}",""])}});