webpackJsonp([36],{2226:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),c=o(5),u=n(c),l=o(2227),p=n(l),f=function(e){function t(e){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),s(t,[{key:"render",value:function(){return u.default.createElement(p.default,this.props)}}]),t}(c.Component),d=f;t.default=d,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(f,"LookStudentWeakSpot","D:/Work/yjyx_web/src/containers/student/weak-spot/lookStudentWeakSpot.js"),__REACT_HOT_LOADER__.register(d,"default","D:/Work/yjyx_web/src/containers/student/weak-spot/lookStudentWeakSpot.js"))}()},2227:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=o(1071),c=n(s),u=o(208),l=n(u),p=o(1072),f=n(p),d=o(35),h=n(d),k=o(336),_=n(k),w=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}();o(1073),o(302),o(1074),o(36),o(337);var y=o(5),m=n(y),b=o(23),v=o(86),g=n(v);o(2228);var O=o(1684),E=n(O),j=function(e){function t(e){a(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={couldView:"",couldTry:"",weakspotList:[],modalVisible:!1},o}return i(t,e),w(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params,t={action:"stats_get_weak_history",subject_id:e.subjectId};this.getWeakSpotList(t)}},{key:"getWeakSpotList",value:function(e,t){t=t||this,b.Networker.snatch(g.default.stats,"GET",e).then(function(e){t.setState({couldView:e.couldview,couldTry:e.couldtry,weakspotList:e.order_weak})}).catch(function(e){console.error(e)})}},{key:"lookWeakSpotVideo",value:function(e,t,o,n){1==t?this.props.history.push(this.props.match.url+"/"+e):this.showConfirm(o)}},{key:"showConfirm",value:function(e){var t=void 0;t=1==e?"请先开通免费试用哦！":"请先开通会员哦！";var o=this;_.default.confirm({content:t,okText:"前往开通",cancelText:"默默离开",onOk:function(){1==e?o.tryVIP():o.chargeVIP()},onCancel:function(){}})}},{key:"chargeSuccess",value:function(){var e=this.props.match.params,t={action:"stats_get_weak_history",subject_id:e.subjectId},o=this;(0,E.default)({parameter:t,_this:o,onOk:this.getWeakSpotList,onCancel:this.getWeakSpotList})}},{key:"tryVIP",value:function(){var e=this,t=this.props.match.params,o={action:"stats_get_weak_history",subject_id:t.subjectId};this.getProductId(t.subjectId).then(function(e){return{action:"trial",productid:e.id}}).then(function(t){e.chargeVIPWithALiPay(t).then(function(t){0===t.retcode?(h.default.success("恭喜您, 现在可享受试用会员!",2,h.default.destroy),e.getWeakSpotList(o)):h.default.error(t.msg,2,h.default.destroy)})})}},{key:"chargeVIP",value:function(){var e=this,t=this.props.match.params,o=window.open("","_blank");o.document.write("前往支付宝付款..."),this.setState({modalVisible:!1});var n={paymenttype:1,price_package_index:0};this.getProductId(t.subjectId).then(function(e){return{action:"purchase",productid:e.id,detail:JSON.stringify(n)}}).then(function(t){e.chargeVIPWithALiPay(t).then(function(t){o.location.href=t&&t.alipayurl,e.chargeSuccess()})})}},{key:"getProductId",value:function(e){return new Promise(function(t,o){var n={action:"getonememproductinfo",subjectid:e};b.Networker.snatch(g.default.getProductDetail,"GET",n).then(function(e){t(e)}).catch(function(e){o(e)})})}},{key:"chargeVIPWithALiPay",value:function(e){return new Promise(function(t,o){b.Networker.snatch(g.default.chargeVip,"POST",e).then(function(e){t(e)}).catch(function(e){o(e)})})}},{key:"showWeakSpotList",value:function(e){var t=this;return e&&e.map(function(e,o){var n=e.lessons&&e.lessons.length>0;return m.default.createElement(c.default,{key:e.id,className:"weak-spot-list-item"},m.default.createElement(f.default,{span:14},m.default.createElement("span",{className:"weak-spot-serial"},o+1,"、"),m.default.createElement("span",null,e.name)),m.default.createElement(f.default,{span:4},m.default.createElement("span",null,"错"+e.count+"次")),m.default.createElement(f.default,{span:6},m.default.createElement(l.default,{className:"weak-spot-btn",onClick:function(){return t.lookWeakSpotVideo.call(t,e.id,t.state.couldView,t.state.couldTry,n)}},"视频讲解")))})}},{key:"rollback",value:function(e){this.props.history.push("/student/weakspot")}},{key:"render",value:function(){var e=this.showWeakSpotList(this.state.weakspotList);return m.default.createElement("div",{className:"weak-spot-panel"},m.default.createElement("div",{className:"weak-spot"},m.default.createElement(l.default,{onClick:this.rollback.bind(this,"hei"),className:"rollback",icon:"rollback"},"返回"),m.default.createElement("h3",{className:"weak-spot-header"},"薄弱点列表"),e))}}]),t}(y.Component),x=j;t.default=x,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(j,"LookWeakSpot","D:/Work/yjyx_web/src/components/student/weak-spot/lookWeakSpot.js"),__REACT_HOT_LOADER__.register(x,"default","D:/Work/yjyx_web/src/components/student/weak-spot/lookWeakSpot.js"))}()},2228:function(e,t,o){var n=o(2229);"string"==typeof n&&(n=[[e.i,n,""]]);var a={};a.transform=void 0,o(117)(n,a),n.locals&&(e.exports=n.locals)},2229:function(e,t,o){t=e.exports=o(116)(void 0),t.push([e.i,".weak-spot-panel{margin:8px auto;max-width:1100px;min-height:600px;width:100%;padding:8px}.weak-spot-panel .weak-spot{margin:8px;position:relative}.weak-spot-panel .weak-spot .rollback{position:absolute;right:0;top:0;z-index:10}.weak-spot-panel .weak-spot .weak-spot-header{font-size:16px;padding:0 8px 16px;border-bottom:1px solid #000;text-align:center}.weak-spot-panel .weak-spot .weak-spot-list-item{margin-left:8px;padding:8px 4px;border-bottom:1px solid #666}.weak-spot-panel .weak-spot .weak-spot-list-item .weak-spot-btn{background-color:#2ecc71;color:#fff}.weak-spot-panel .weak-spot .weak-spot-list-item .weak-spot-btn:hover{color:#3498db}",""])}});